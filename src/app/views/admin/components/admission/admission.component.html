<div *ngIf="isSubmitting" class="overlay">
    <mat-spinner diameter="90"></mat-spinner>
</div>

<div *ngIf="isLoading" class="overlay">
    <mat-spinner diameter="90"></mat-spinner>
</div>
<div *ngIf="!isLoading">

<div class="container mt-2 bg-gradient" *ngIf="!hasExistingAdmission; else admissionInProgress">
    <div>
        <mat-card appearance="outlined"  class="custom-card-header-2 text-dark mt-2 mb-3">
<mat-card-content>
                <div align="center" >
                    <h1 class="text-dark"> Admissions <mat-icon>school</mat-icon></h1>
                </div>
</mat-card-content>
        </mat-card>

    </div>
    <div class="row justify-content-center">
        <div class="col-lg-12 col-md-12">
            <mat-card  style="box-shadow: 10px 10px 5px rgba(236, 236, 236, 0.5);" class="custom-card" appearance="outlined">
                <mat-card-title class="text-center mb-1 mt-3"></mat-card-title>
                <mat-card-content>
                   <div align="center"> <ul class=" flexjustify-content-center">Suivez les √©tapes ci-dessous pour soumettre votre demande d'admission sur <br> <strong>Mayk - Consulting</strong> </ul></div>
                    <ul>
                        <li>Choisissez votre pays de destination pour les √©tudes (France ou Canada) üá´üá∑ üá®üá¶   .</li>
                        <li>S√©lectionnez le type d'admission qui correspond √† votre situation.</li>
                        <li>Indiquez votre fili√®re d'√©tude et votre niveau d'√©ducation actuel.</li>
                        <li>Fournissez les informations demand√©es pour chaque √©tape, y compris les justificatifs et moyennes (Trimestre, Semestre, nombre de points au BAC.)</li>
                        <li>Merci de joindre le maximum de bulletin que vous avez en votre possession et de bien saisir les moyennes !</li>
                        <li class="text-danger"><strong>Attention, les documents illisibles seront rejet√©s ! Veuillez fournir des scans de tr√®s bonne qualit√©.</strong></li>
                        <li>Joignez les documents requis : les bulletins de notes et les justificatifs de bac.</li>
                        <li>Enfin, r√©visez votre demande et soumettez-la.</li>
                    </ul>
                    <br>
                    <ul>
                        <p>Notre service de consulting se chargera de tout votre processus d'admission une fois que vous aurez pay√© la somme n√©cessaire faisant office de frais de service pour le traitement de votre demande, qui s'√©l√®ve √† <strong class="text-danger">200 000 FCFA</strong> pour la France et <strong class="text-danger">1 000 000 FCFA</strong> Pour le Canada (Comprenant tout les frais d'admissions ainsi que les frais du CAQ : Certificat d'admission au Qu√©bec si admission au Qu√©bec). Cette somme est non remboursable, m√™me en cas de refus d'admission, ce qui ne sera probablement pas le cas gr√¢ce √† la qualit√© des services que nous proposons.</p>
                    </ul>
                </mat-card-content>
            </mat-card>
            <br>

            <mat-card appearance="outlined" class="mb-4 custom-card">
                <div align="center" class="mt-5">
                    <h4>Choisissez le pays souhaitez pour commencer !</h4>
                </div>
                <mat-card-title class="text-center mb-4 mt-3"></mat-card-title>
                <mat-card-content>
                    <form [formGroup]="educationForm">
                        <mat-form-field appearance="outline" class="full-width">
                            <mat-label>Pays</mat-label>
                            <mat-select formControlName="country" (selectionChange)="onCountryChange($event.value)">
                                <mat-option *ngFor="let country of countries" [value]="country.value">
                                    {{ country.viewValue }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-vertical-stepper linear>
                            <mat-step *ngIf="selectedCountry" [stepControl]="educationForm?.get('admissionType')">
                                <ng-template matStepLabel>Type d'Admission ({{ selectedAdmissionType || 'S√©lectionnez' }})</ng-template>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-select formControlName="admissionType" (selectionChange)="onAdmissionTypeChange($event.value)">
                                        <mat-option *ngFor="let type of admissionTypes" [value]="type.value">
                                            {{ type.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <mat-step *ngIf="selectedAdmissionType && selectedCountry" [stepControl]="educationForm?.get('fieldOfStudy')">
                                <ng-template matStepLabel>Fili√®re ({{ selectedField || 'Renseignez' }})</ng-template>
                                <mat-form-field appearance="outline" class="full-width">
                                    <input matInput placeholder="Fili√®re" formControlName="fieldOfStudy" (input)="onFieldOfStudyChange($event.target.value)">
                                </mat-form-field>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Revenir</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <mat-step *ngIf="selectedAdmissionType && selectedCountry" [stepControl]="educationForm?.get('educationLevel')">
                                <ng-template matStepLabel>Niveau d'√©tude actuel ({{ selectedLevel || 'S√©lectionnez' }})</ng-template>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-select formControlName="educationLevel" (selectionChange)="onEducationLevelChange($event.value)">
                                        <mat-option *ngFor="let level of educationLevels" [value]="level.value">
                                            {{ level.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-hint>Votre niveau d'√©tude actuel</mat-hint>
                                </mat-form-field>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Revenir</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <!-- PARCOURS SUP & OTHER-->
                            <mat-step *ngIf="(['PARCOURS_SUP', 'ECOLE_PRIVEE', 'ETUDE_UNIVERSITAIRE', 'CEGEP_COLLEGIALE','A_DETERMINER'].includes(selectedAdmissionType)) && selectedLevel">
                                <ng-template matStepLabel>Baccalaur√©at & bulletin de notes</ng-template>

                                    <div align="center">
                                        <h3>√âtude Secondaire</h3>
                                        <mat-icon>school</mat-icon>
                                    </div>
                                    <div align="center" class="mt-2">
                                        <p>Ici il est question de renseigner vos moyennes obtenues par trimestre durant votre cursus secondaire et d'y joindre les justificatifs respectifs !</p>
                                    </div>
                                    <div *ngFor="let year of ['2nd', 'Premi√®re', 'Terminale']">
                                        <div align="center" class="mt-3 mb-4" style="background-color:rgba(216,216,216,0.31); border-radius: 10px">
                                            <h4> {{ year }}</h4>
                                        </div>
                                        <div *ngFor="let term of [1, 2, 3]" class="row mb-5">
                                            <div class="col-lg-6 col-md-6 col-sm-12 justificatif-btn">
                                                <button mat-raised-button color="primary" (click)="fileInput.click()">Justificatif <mat-icon>add</mat-icon></button>
                                                <input type="file" #fileInput hidden (change)="onFileSelected($event, 'term' + year + term + 'Url')">
                                                <span *ngIf="fileNames['term' + year + term + 'Url']">{{ fileNames['term' + year + term + 'Url'] }}</span>
                                            </div>
                                            <mat-form-field appearance="outline" floatLabel="always" class="col-lg-6 col-md-6 col-sm-12">
                                                <mat-label>Moyenne Trimestre {{ term }}</mat-label>
                                                <input type="number" matInput [formControlName]="'termAverage' + year + term">
                                                <mat-hint>Moyenne du Trimestre {{term}} obtenue /20</mat-hint>
                                            </mat-form-field>
                                        </div>
                                    </div>


                                    <div align="center" class="mt-3">
                                        <h3>Baccalaur√©at</h3>
                                    </div>
                                    <div align="center" class="mt-2">
                                        <p>Ici il est question de choisir le type d'enseignement, joindre votre collante puis de renseigner le nombre de points obtenu au bac !</p>
                                    </div>
                                    <div class="row mt-2" align="center">
                                        <mat-radio-group aria-label="Select an option" formControlName="bacType">
                                            <mat-radio-button value="Bac g√©n√©ral">BAC G√©n√©ral</mat-radio-button>
                                            <mat-radio-button value="Bac Technique">BAC Technique</mat-radio-button>
                                        </mat-radio-group>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 col-sm-12 justificatif-btn">
                                            <button mat-raised-button color="primary" (click)="bacFileInput.click()">Justificatif<mat-icon>add</mat-icon></button>
                                            <input type="file" #bacFileInput hidden (change)="onBacFileSelected($event)">
                                            <span *ngIf="bacFileName">{{ bacFileName }}</span>
                                        </div>
                                        <mat-form-field appearance="outline" floatLabel="always" class="col-lg-6 col-md-6 col-sm-12">
                                            <mat-label>Moyenne g√©n√©rale</mat-label>
                                            <input type="number" matInput formControlName="bacAverage">
                                            <mat-hint>Mettre le nombre de points obtenu</mat-hint>
                                        </mat-form-field>
                                    </div>
                                    <div align="center" class="mt-5">
                                        <h3>√âtude Sup√©rieure</h3>
                                    </div>
                                    <div align="center">
                                        <p>Ici il est question de renseigner vos moyennes ainsi que d'y joindre vos bulletins respectifs par ann√©e d'√©tude !</p>
                                    </div>
                                <div *ngFor="let year of getYears(selectedLevel)">
                                    <div align="center" class="mb-4" style="background-color: rgba(216,216,216,0.31); border-radius: 10px">
                                        <h4 class="mb-2">Ann√©e {{ year }} <mat-icon>school</mat-icon></h4>
                                    </div>
                                    <div *ngFor="let Sem of [1, 2]" class="row mb-5">
                                        <div class="col-lg-6 col-md-6 col-sm-12 justificatif-btn">
                                            <button mat-raised-button color="primary" (click)="fileInput.click()">Justificatif <mat-icon>add</mat-icon></button>
                                            <input type="file" #fileInput hidden (change)="onFileSelected($event, 'year' + year + 'Sem' + Sem )">
                                            <span *ngIf="fileNames['year' + year + 'Sem' + Sem ]">{{ fileNames['year' + year + 'Sem' + Sem ] }}</span>
                                        </div>
                                        <mat-form-field appearance="outline" floatLabel="always" class="col-lg-6 col-md-6 col-sm-12">
                                            <mat-label>Moyenne Semestre {{ Sem }}</mat-label>
                                            <input matInput type="number" [formControlName]="'averageYear' + year + 'Sem' + Sem ">
                                            <mat-hint>Moyenne du semestre {{Sem}} obtenue /20</mat-hint>
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Pr√©c√©dent</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <!-- CAMPUS FRANCE -->
                            <mat-step *ngIf="selectedAdmissionType === 'CAMPUS_FRANCE' && selectedLevel">
                                <ng-template matStepLabel>Baccalaur√©at & bulletin de notes</ng-template>

                                    <div align="center" class="mt-4">
                                        <h3>Baccalaur√©at</h3>
                                    </div>
                                    <div align="center" class="mt-2">
                                        <p>Ici il est question de choisir le type d'enseignement, joindre votre collante puis de renseigner le nombre de points obtenu au bac !</p>
                                    </div>
                                    <div class="row mt-2" align="center">
                                        <mat-radio-group aria-label="Select an option" formControlName="bacType">
                                            <mat-radio-button value="Bac g√©n√©ral">BAC G√©n√©ral</mat-radio-button>
                                            <mat-radio-button value="Bac Technique">BAC Technique</mat-radio-button>
                                        </mat-radio-group>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 col-sm-12 justificatif-btn">
                                            <button mat-raised-button color="primary" (click)="campusFranceFileInput.click()">Justificatif <mat-icon>add</mat-icon></button>
                                            <input type="file" #campusFranceFileInput hidden (change)="onBac2FileSelected($event)">
                                            <span *ngIf="campusFranceFileName" class="file-name">{{ campusFranceFileName }}</span>
                                            <br>
                                        </div>
                                        <mat-form-field appearance="outline" floatLabel="always" class="col-lg-6 col-md-6 col-sm-12">
                                            <mat-label>Nombre de point </mat-label>
                                            <input matInput type="number" formControlName="bacAverage">
                                            <mat-hint>Mettre le nombre de points obtenu</mat-hint>
                                        </mat-form-field>
                                    </div>

                                    <div align="center" class="mt-5">
                                        <h3>√âtude Sup√©rieure</h3>
                                    </div>
                                    <div align="center">
                                        <p>Ici il est question de renseigner vos moyennes ainsi que d'y joindre vos bulletins respectifs par ann√©e d'√©tude !</p>
                                    </div>
                                    <div *ngFor="let year of getYears(selectedLevel)">
                                        <div align="center" class="mb-4" style="background-color: rgba(216,216,216,0.31); border-radius: 10px">
                                            <h4 class="mb-2">Ann√©e {{ year }} <mat-icon>school</mat-icon></h4>
                                        </div>
                                        <div *ngFor="let Sem of [1, 2]" class="row mb-5">
                                            <div class="col-lg-6 col-md-6 col-sm-12 justificatif-btn">
                                                <button mat-raised-button color="primary" (click)="fileInput.click()">Justificatif <mat-icon>add</mat-icon></button>
                                                <input type="file" #fileInput hidden (change)="onFileSelected($event, 'year' + year + 'Sem' + Sem )">
                                                <span *ngIf="fileNames['year' + year + 'Sem' + Sem ]">{{ fileNames['year' + year + 'Sem' + Sem ] }}</span>
                                            </div>
                                            <mat-form-field appearance="outline" floatLabel="always" class="col-lg-6 col-md-6 col-sm-12">
                                                <mat-label>Moyenne Semestre {{ Sem }}</mat-label>
                                                <input matInput type="number" [formControlName]="'averageYear' + year + 'Sem' + Sem ">
                                                <mat-hint>Moyenne du semestre {{Sem}} obtenue /20</mat-hint>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Revenir</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <mat-step *ngIf="selectedLevel">
                                <ng-template matStepLabel>Certificat d'inscription</ng-template>
                                <div align="center" class="mt-4">
                                    <h3>Votre Certificat d'inscription de l'ann√©e en cours</h3>
                                </div>
                                <div align="center" class="mt-2">
                                    <p>Si vous √™tes actuellement inscrit dans une √©cole/Universit√©, veuillez fournir le certificat d'inscription.<br><br><strong *ngIf="!justificatifInscription">Vous pouvez passer cette √©tape si vous en avez pas.</strong></p>
                                </div>
                                <div class="row">
                                    <div class="justificatif-btn">
                                        <div *ngIf="!justificatifInscription" align="center"><button mat-raised-button color="primary" (click)="fileInputJustificatifInscription.click()">
                                            Justificatif <mat-icon>add</mat-icon>
                                        </button>

                                            <input type="file" #fileInputJustificatifInscription hidden (change)="onJustificatifInscriptionSelected($event)">
                                            </div>

                                        <div align="center">
                                            <span *ngIf="justificatifInscription" style="color: #096a38"> <strong style="margin-left: 4px">Justificatif re√ßu avec success !</strong></span>
                                        </div>


                                    </div>
                                </div>



                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Revenir</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <!-- cv  -->
                            <mat-step *ngIf="selectedLevel">
                                <ng-template matStepLabel>Un CV ?</ng-template>

                                <!-- Boutons radio pour choisir s'il y a un CV -->
                                <mat-radio-group [(ngModel)]="hasCV" formControlName="hasCV">
                                    <mat-radio-button value="yes">J'ai un CV et je suis en mesure de le joindre ainsi que mes justificatifs de stage</mat-radio-button>
                                    <br>
                                    <mat-radio-button class="mt-4" value="no">Je n'ai pas de CV, je vais le joindre plus tard </mat-radio-button>
                                </mat-radio-group>



                                <!-- Si "J'ai un CV" est s√©lectionn√©, afficher le champ pour t√©l√©charger le CV -->
                                <div *ngIf="hasCV === 'yes'" class="file-upload">
                                    <br>
                                    <p>Merci de joindre votre CV ainsi que tous les justificatif de stage associ√©s √† votre parcours <u style="color: #e80564">dans le m√™me fichier PDF.</u></p>
                                    <br>
                                    <mat-form-field appearance="outline" floatLabel="always" class="full-width">
                                        <input type="file" matInput (change)="onCVFileSelected($event)" />
                                        <mat-hint>Joindre votre CV</mat-hint>
                                    </mat-form-field>
                                </div>

                                <!-- Si "Je n'ai pas de CV" est s√©lectionn√©, afficher le message -->
                                <div *ngIf="hasCV === 'no'" class="no-cv-message">
                                    <br>
                                    <mat-hint class="mt-2">Ne vous inqui√©tez pas, vous pourrez le joindre plus tard.</mat-hint>
                                </div>

                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Revenir</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <!-- Commentaire et message particulier Relatif √† votre candidature -->
                            <mat-step *ngIf="selectedLevel" [stepControl]="educationForm.get('comments')">
                                <ng-template matStepLabel>Un commentaire ?</ng-template>
                                <mat-form-field appearance="outline" floatLabel="always" class="full-width">
                                    <textarea matInput formControlName="comments" rows="5"></textarea>
                                    <mat-hint>Vous pouvez nous laisser des consignes</mat-hint>
                                </mat-form-field>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Revenir</button>
                                    <button mat-raised-button color="primary" matStepperNext>Suivant</button>
                                </div>
                            </mat-step>

                            <mat-step *ngIf="selectedLevel">
                                <ng-template matStepLabel>R√©capitulatif</ng-template>
                                    <div class="summary">
                                        <p><strong>Pays :</strong> {{ selectedCountry }}</p>
                                        <p><strong>Admission :</strong> {{ selectedAdmissionType }}</p>
                                        <p><strong>Fili√®re : </strong>{{ educationForm.get('fieldOfStudy').value }} </p>
                                        <p><strong>Niveau actuel :</strong> {{ selectedLevel }}</p>
                                        <!-- Ajoutez d'autres champs ici selon les besoins -->
                                    </div>
                                <div class="stepper-buttons">
                                    <button mat-raised-button color="accent" matStepperPrevious>Pr√©c√©dent</button>
                                    <button mat-raised-button color="primary" (click)="submitForm()">Soumettre</button>
                                </div>
                            </mat-step>
                        </mat-vertical-stepper>

                        <!-- Hidden fields for file URLs -->
                        <input type="hidden" formControlName="bacUrl">
                        <input type="hidden" formControlName="term2nd1Url">
                        <input type="hidden" formControlName="term2nd2Url">
                        <input type="hidden" formControlName="term2nd3Url">
                        <input type="hidden" formControlName="termPremiere1Url">
                        <input type="hidden" formControlName="termPremiere2Url">
                        <input type="hidden" formControlName="termPremiere3Url">
                        <input type="hidden" formControlName="termTerminale1Url">
                        <input type="hidden" formControlName="termTerminale2Url">
                        <input type="hidden" formControlName="termTerminale3Url">
                        <input type="hidden" formControlName="year1Sem1Url">
                        <input type="hidden" formControlName="year1Sem2Url">
                        <input type="hidden" formControlName="year2Sem1Url">
                        <input type="hidden" formControlName="year2Sem2Url">
                        <input type="hidden" formControlName="year3Sem1Url">
                        <input type="hidden" formControlName="year3Sem2Url">
                        <input type="hidden" formControlName="year4Sem1Url">
                        <input type="hidden" formControlName="year4Sem2Url">
                        <input type="hidden" formControlName="year5Sem1Url">
                        <input type="hidden" formControlName="year5Sem2Url">
                        <!-- Add hidden fields for other document URLs if needed -->

                    </form>
                </mat-card-content>
            </mat-card>
        </div>
    </div>


</div>

<ng-template #admissionInProgress>
    <div class="container">
        <mat-card appearance="outlined"  class="custom-card-header-2 text-dark mt-2 mb-3">
            <mat-card-content>
                <div align="center" >
                    <h1 class="text-dark"> Admissions <mat-icon>school</mat-icon></h1>
                </div>
            </mat-card-content>
        </mat-card>


        <div class="card mb-4 text-center">
            <div class="card-header" style="background: #072150; color: white" >
                Etat de la demande
            </div>
            <div class="card-body">
                <div class="progress-container d-flex justify-content-between align-items-center">
                    <div class="progress-step text-center">
                        <div class="step-circle bg-danger mx-auto mb-2"></div>
                        <p class="step-label fw-bold text-xs text-uppercase" style="color:#df3671 "><strong>En attente</strong></p>
                    </div>
                    <div class="progress-step text-center">
                        <div class="step-circle bg-primary mx-auto mb-2"></div>
                        <p class="step-label fw-bold text-xs text-uppercase" style="color: #072150"><strong>En cours</strong></p>
                    </div>
                    <div class="progress-step text-center">
                        <div class="step-circle bg-success mx-auto mb-2"></div>
                        <p class="step-label  fw-bold text-xs text-uppercase" style="color: rgb(21,108,63);"><strong>Termin√©e</strong></p>
                    </div>
                </div>
                <div>
                    <div *ngIf="admissionData.etatDemande === 0" class="" >
                        <div class="progress mb-4" role="progressbar" aria-label="Animated striped example" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar progress-bar-striped progress-bar-animated " style="width: 33%;background:#df3671; color: white ">En attente ...</div>
                        </div>
                        <p *ngIf="!admissionData.justificatifPaiement">Demande en <strong class="text-secondary fw-bold text-xs text-uppercase">attente de paiement.</strong></p>
                    </div>
                    <div *ngIf="admissionData.etatDemande === 1" class="" >
                        <div class="progress mb-4" role="progressbar" aria-label="Animated striped example" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar progress-bar-striped progress-bar-animated " style="width: 50%; background: #072150; color: white">En cours de traitement ..</div>
                        </div>
                        <p>Le montage de votre dossier est actuellement en cours ...<br> Pour plus d'informations veuillez contacter le service MaykConsulting au + 33 6 21 35 86 92</p>
                    </div>
                    <div *ngIf="admissionData.etatDemande === 2 || admissionData.etatDemande === 3 || admissionData.etatDemande === 4">
                        <div class="progress mb-4" role="progressbar" aria-label="Animated striped example" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar progress-bar-striped progress-bar-animated " style="width: 100%; background: rgb(21,108,63); color: white">Traitement termin√©..</div>
                        </div>
                        <p>Le traitement de votre demande est termin√©e. Merci de nous avoir fait confiance ...</p>
                    </div>
                    <div *ngIf="admissionData.etatDemande === 5" class="" >
                        <div class="progress mb-4" role="progressbar" aria-label="Animated striped example" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar progress-bar-striped progress-bar-animated " style="width: 100%; background: rgb(241,165,7); color: white">Demande Archiv√©e ...</div>
                        </div>
                        <p>Votre demande a √©t√© archiv√©e. Merci de contacter le service Maykconsulting ...</p>
                    </div>
                    <div *ngIf="!admissionData.justificatifPaiement && admissionData.etatDemande === 0" >
                        <p align="center" class="alert alert-danger">Nous n'avons pas encore re√ßu votre justificatif de paiement. Ajouter le en cliquant sur le bouton "Paiement"</p>
                    </div>
                    <div *ngIf="admissionData.etatDemande === 3" >
                        <p align="center" class="alert alert-success">F√©licitations !!! Vous avez √©t√© accept√© dans au moins 1 √©tablissement. <br> Pour la garantie financi√®re ? Pas de souci Maykconsulting dispose d'un service de garantie financi√®re. <a routerLink="/admin/finance"><u>  Cliquez ici ! </u> </a></p>
                    </div>
                    <div *ngIf="admissionData.etatDemande === 4" >
                        <p align="center" class="alert alert-danger">Pas de chance !!! Malheuresement vous n'avez √©t√© accept√© dans aucun √©tablissement. <br>Nous pouvons tenter une admission dans une √©cole priv√©e, mais les frais d'admission seront √† votre charge. </p>
                    </div>
                </div>
            </div>
            <div class="card-footer text-body-secondary">
                Demande soumise le <strong>{{ formattedDate }}</strong>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="">
                    <div class="card text-center">
                        <div class="card-header" >
                            Devis et Paiement
                        </div>
                        <div class="card-body">
                            <div *ngIf="admissionData.justificatifPaiement && admissionData.etatDemande === 0 ">
                                <p align="center" class="alert alert-success">Nous avons re√ßu votre justificatif de paiement le statut de votre demande changera  d√®s que votre justificatif sera approuv√© par le syst√®me</p>
                            </div>
                            <div *ngIf="admissionData.justificatifPaiement && admissionData.etatDemande !== 0 ">
                                <p align="center" class="alert alert-success">Votre justificatif de paiement a √©t√© valid√© par notre service.</p>
                            </div>
                            <p  *ngIf="!admissionData.justificatifPaiement"><strong class="text-danger"><u>NB</u>:</strong>T√©l√©charger votre Devis g√©n√©r√© automatiquement par le syst√®me.Vous pouvez joindre le justificatif de paiement en cliquant sur le bouton "Paiement".Votre demande changera de statut automatiquement et sera trait√©e par nos agents.</p>
                            <div class="d-flex justify-content-between">
                                <div>
                                    <!-- (click)="openDevisAdmissionComponent()" -->
                                    <button routerLink="/admin/admission/devis" mat-stroked-button style="color: #072150;">
                                        Votre devis ici ! <mat-icon>description</mat-icon>
                                    </button>
                                </div>
                                <div>
                                    <button mat-flat-button  style="margin-left: 10px; background: #072150; color: white" (click)="goToPaymentPage()">
                                        Paiement <mat-icon>payment</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-6 doc-heb">
                <div class="card text-center">
                    <div class="card-header" >
                        Documents Relatifs √† mon admission
                    </div>
                    <div class="card-body">
                        <div *ngIf="admissionData.admissionFileOfi">
                            <h5 class="card-title" *ngIf="admissionData.etatDemande !== 3">Document admission</h5>
                            <p>Vous avez √©t√© accept√© √† : " <strong>{{ admissionData.nomUniversite }} </strong>"</p>
                            <p class="card-text">Cliquez ici pour t√©l√©charger votre/Vos justificatif d'admission !</p>
                            <button (click)="viewDocument(admissionData.admissionFileOfi)" style="color: white ; background: #107a45" class="btn"><mat-icon>download</mat-icon></button>
                        </div>
                        <div *ngIf="!admissionData.admissionFileOfi">
                            <p class="card-text"><strong class="text-danger"><u>Document indisponible pour l'instant.</u></strong></p>
                            <p>Pas de panique, une fois la proc√©dure termin√© ce dernier apparaitra ici ! Surveillez attentivement vos mails.</p>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header text-center" >
                        Votre demande
                    </div>
                    <div class="card-body">
                        <p class="mt-2"><strong>Pays d'√©tude :</strong> {{ admissionData.country }}</p>
                        <p><strong>Admission :</strong> {{ admissionData.admissionType }}</p>
                        <p><strong>Date de la demande :</strong> {{ formattedDate }} </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header text-center" >
                        Votre Cursus
                    </div>
                    <div class="card-body">
                        <p class="mt-2"><strong>Type de Baccalaur√©at :</strong> {{ admissionData.bacType }}</p>
                        <p class="mt-2"><strong>Fili√®re d'√©tude :</strong> {{ admissionData.fieldOfStudy }}</p>
                        <p class="mt-2"><strong>Niveau d'√©tude :</strong> {{ admissionData.educationLevel }}</p>
                    </div>
                </div>
            </div>
        </div>




        <div class="card mb-4" >
            <div class="card-header text-center" >
                Vos consignes
            </div>
            <div class="card-body">
                <div *ngIf="admissionData.comments; else noComments"><p class="mt-2" align="center">{{ admissionData.comments }}</p></div>
                <ng-template #noComments><p class="mt-2">Vous n'avez laiss√© aucune consigne ...</p></ng-template>
            </div>
        </div>



        <div class="card mb-4">
            <div class="card-header text-center" style="background: #072150; color: white">
                Mon parcours d√©taill√©
            </div>
            <div class="card-body">
                <div *ngIf="admissionData.admissionType === 'CAMPUS_FRANCE'; else otherAdmission;">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col" class="fw-bold text-xs text-uppercase" style="color: #072150;"><mat-icon>description</mat-icon>
                            </th>
                            <th class="fw-bold text-xs text-uppercase" style="color: #072150;"><mat-icon>bar_chart</mat-icon>
                            </th>
                            <th class="text-primary fw-bold text-xs text-uppercase">
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- BAC Information -->
                        <tr>
                            <th scope="row">Bac</th>
                            <td>{{ admissionData.bacAverage }} pts</td>
                            <td><button mat-stroked-button style="color: #072150;" (click)="openEditAdmissionDocumentComponent('bac')"><mat-icon>edit</mat-icon></button></td>
                        </tr>

                        <!-- Information for each year of study -->
                        <tr *ngFor="let year of getYears(admissionData.educationLevel)">
                            <th scope="row">Ann√©e {{ year }} (S1/S2)</th>
                            <td>{{ admissionData['averageYear' + year + 'Sem1'] }} / {{ admissionData['averageYear' + year + 'Sem2'] }}</td>
                            <td>
                                <button mat-stroked-button style="color: #072150;" (click)="openEditAdmissionDocumentComponent(year)"><mat-icon>edit</mat-icon></button>
                            </td>
                        </tr>

                        <!-- Certificat d'inscription -->
                        <tr >
                            <th scope="row">Certificat d'inscription actuel (si je suis inscrit dans une √©cole)</th>
                            <td></td>
                            <td *ngIf="admissionData.justificatifInscription"><button  mat-stroked-button style="color: #072150; margin-bottom: 2px;margin-left: 2px" (click)="viewDocument(admissionData.justificatifInscription)"><mat-icon>visibility</mat-icon></button> <button mat-stroked-button style="color: #d9006e; margin-bottom: 2px; margin-left: 2px" (click)="removeJIFromAdmissionData()"><mat-icon>delete</mat-icon></button></td>
                            <td *ngIf="!admissionData.justificatifInscription"><button mat-stroked-button style="color: #072150;" (click)="uploadJIAlreadyAdmissionData()"><mat-icon>upload</mat-icon></button></td>
                        </tr>

                        <!-- CV -->
                        <tr >
                            <th scope="row" >Mon CV + Mon / Mes Attestation(s) de stage (si tel est le cas dans <u style="color: #e80564">le m√™me fichier PDF</u>) </th>
                            <td></td>
                            <td *ngIf="admissionData.cvUrl"><button  mat-stroked-button style="color: #072150; margin-bottom: 2px;margin-left: 2px" (click)="viewDocument(admissionData.cvUrl)"><mat-icon>visibility</mat-icon></button> <button mat-stroked-button style="color: #d9006e; margin-bottom: 2px;margin-left: 2px" (click)="removeCvFromAdmissionData()"><mat-icon>delete</mat-icon></button></td>
                            <td *ngIf="!admissionData.cvUrl"><button mat-stroked-button style="color: #072150;" (click)="uploadCvAlreadyAdmissionData()"><mat-icon>upload</mat-icon></button></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <ng-template #otherAdmission>
                    <table class="table">
                        <tbody>
                        <!-- College Information -->
                        <tr *ngFor="let year of ['2nd', 'Premiere', 'Terminale']">
                            <th scope="row" style="color: #072150">{{ year }} (T1/T2/T3)</th>
                            <td>{{ admissionData['termAverage' + year + '1'] }} / {{ admissionData['termAverage' + year + '2'] }}  / {{ admissionData['termAverage' + year + '3'] }}</td>
                            <td>
                                <button mat-stroked-button style="color: #072150;" (click)="openEditAdmissionDocumentComponent(year)"><mat-icon>edit</mat-icon></button>
                            </td>
                        </tr>
                        <!-- BAC Information -->
                        <tr>
                            <th scope="row" style="color: #072150">Bac</th>
                            <td>{{ admissionData.bacAverage }} pts</td>
                            <td><button mat-stroked-button style="color: #072150;" (click)="openEditAdmissionDocumentComponent('bac')"><mat-icon>edit</mat-icon></button></td>
                        </tr>

                        <!-- Information for each year of study -->
                        <tr *ngFor="let year of getYears(admissionData.educationLevel)">
                            <th scope="row" style="color: #072150">Ann√©e Univ. {{ year }} (S1/S2)</th>
                            <td>{{ admissionData['averageYear' + year + 'Sem1'] }} / {{ admissionData['averageYear' + year + 'Sem2'] }}</td>
                            <td>
                                <button mat-stroked-button style="color: #072150;" (click)="openEditAdmissionDocumentComponent(year)"><mat-icon>edit</mat-icon></button>
                            </td>
                        </tr>

                        <!-- certificat d'inscription -->
                        <tr >
                            <th scope="row">Certificat d'inscription actuel (si je suis inscrit dans une √©cole)</th>
                            <td></td>
                            <td *ngIf="admissionData.justificatifInscription"><button  mat-stroked-button style="color: #072150; margin-bottom: 2px;margin-left: 2px" (click)="viewDocument(admissionData.justificatifInscription)"><mat-icon>visibility</mat-icon></button> <button mat-stroked-button style="color: #d9006e; margin-bottom: 2px; margin-left: 2px" (click)="removeJIFromAdmissionData()"><mat-icon>delete</mat-icon></button></td>
                            <td *ngIf="!admissionData.justificatifInscription"><button mat-stroked-button style="color: #072150;" (click)="uploadJIAlreadyAdmissionData()"><mat-icon>upload</mat-icon></button></td>
                        </tr>
                        <!-- CV -->
                        <tr >
                            <th scope="row" >Mon CV + Mon / Mes Attestation(s) de stage (si tel est le cas dans <u style="color: #e80564">le m√™me fichier PDF</u>)</th>
                            <td></td>
                            <td *ngIf="admissionData.cvUrl"><button  mat-stroked-button style="color: #072150; margin-bottom: 2px;margin-left: 2px" (click)="viewDocument(admissionData.cvUrl)"><mat-icon>visibility</mat-icon></button> <button mat-stroked-button style="color: #d9006e; margin-bottom: 2px;margin-left: 2px" (click)="removeCvFromAdmissionData()"><mat-icon>delete</mat-icon></button></td>
                            <td *ngIf="!admissionData.cvUrl"><button mat-stroked-button style="color: #072150;" (click)="uploadCvAlreadyAdmissionData()"><mat-icon>upload</mat-icon></button></td>
                        </tr>
                        </tbody>
                    </table>
                </ng-template>
            </div>
        </div>

        <div align="center" class="mt-2 mb-4" *ngIf="admissionData.etatDemande === 0">
            <button mat-flat-button style="background: #cd376c" class="text-white" (click)="onWithdrawRequest()">Retirer ma demande </button>
        </div>
    </div>
</ng-template>



</div>


<style>
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(174, 174, 174, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }
</style>
